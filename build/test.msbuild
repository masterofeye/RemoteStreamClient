<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
	<!--<ItemGroup>
		<ClInclude Include="OpenVXWrapper\*.h" />
	</ItemGroup>
	<ItemGroup>
		<ClCompile Include="OpenVXWrapper\*.cpp" />
	</ItemGroup>-->
	<PropertyGroup>
		<CppCheckDir>"C:\Program Files\Cppcheck"</CppCheckDir>
		<CppCheckExe>cppcheck.exe</CppCheckExe>
		<UnitTestDir>UnitTest</UnitTestDir>
	</PropertyGroup>
	<PropertyGroup>
	
		<OutDir>$(MSBuildStartupDirectory)\OutDir\</OutDir>
		<SolutionProperties>
					Platform=x64;
					Configuration=Debug
		</SolutionProperties>
   </PropertyGroup>
	<ItemGroup>
		<Solution Include="OpenVXWrapper.sln">
			<Properties>
				$(SolutionProperties)
			</Properties>
		</Solution>
	</ItemGroup>
	<Target Name="Build">
		<MSBuild Projects="@(Solution)"/>
	</Target>
	
<Target Name="CppCheck" AfterTargets="AfterBuild">
		<Message Importance="High" Text="**************************************" />
		<Message Importance="High" Text="***************CppCheck***************" />
		<Message Importance="High" Text="**************************************" />
		<MakeDir Directories="$(SolutionDir)build\$(Platform)\$(Configuration)\CppCheck"/>
		<Exec Command = "$(CppCheckDir)\$(CppCheckExe) --enable=all --inconclusive --xml --xml-version=2 $(SolutionDir) 2> $(SolutionDir)build\$(Platform)\$(Configuration)\CppCheck\cppcheck.xml"/>
	</Target>
	
	<Target Name="CopyPlugins" AfterTargets="CppCheck">
	    <Message Importance="High" Text="**************************************" />
		<Message Importance="High" Text="***************Plugins****************" />
		<Message Importance="High" Text="**************************************" />
		<MakeDir Directories="$(SolutionDir)build\$(Platform)\$(Configuration)\Plugins"/>
		<Exec Command = "xcopy /Y /q $(SolutionDir)build\$(Platform)\$(Configuration)\*.plu $(SolutionDir)build\$(Platform)\$(Configuration)\Plugins\"/>
	</Target>
	
	<Target Name="Unittest" AfterTargets="CopyPlugins">
		<Message Importance="High" Text="**************************************" />
		<Message Importance="High" Text="**************UnitTest****************" />
		<Message Importance="High" Text="**************************************" />
		<MakeDir Directories="$(SolutionDir)build\$(Platform)\$(Configuration)\$(UnitTestDir)"/>
		<Exec Command = "xcopy /Y /q $(SolutionDir)build\$(Platform)\$(Configuration)\openvx.dll $(SolutionDir)build\$(Platform)\$(Configuration)\$(UnitTestDir)\"/>
		<Exec Command = "xcopy /Y /q $(SolutionDir)build\$(Platform)\$(Configuration)\OpenVXWrapper.dll $(SolutionDir)build\$(Platform)\$(Configuration)\$(UnitTestDir)\"/>
		<Exec Command = "xcopy /Y /q $(SolutionDir)build\$(Platform)\$(Configuration)\openvx-c_model.dll $(SolutionDir)build\$(Platform)\$(Configuration)\$(UnitTestDir)\"/>
		<Exec Command = "xcopy /Y /q $(SolutionDir)build\$(Platform)\$(Configuration)\RWUnitTest.exe $(SolutionDir)build\$(Platform)\$(Configuration)\$(UnitTestDir)\"/>
		<Exec Command = "xcopy /Y /q $(QTDIR)\bin\Qt5Core.dll $(SolutionDir)build\$(Platform)\$(Configuration)\$(UnitTestDir)\"/>
		<Exec Command = "xcopy /Y /q $(QTDIR)\bin\Qt5Test.dll $(SolutionDir)build\$(Platform)\$(Configuration)\$(UnitTestDir)\"/>
		<Exec Command = "$(SolutionDir)build\$(Platform)\$(Configuration)\$(UnitTestDir)\RWUnitTest.exe"></Exec>
	</Target>
</Project>